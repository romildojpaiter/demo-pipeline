#!groovy

pipeline {

    agent any

	stages {
	
		stage('Build') {
			steps {
                echo 'Construindo...'
                bat 'mvn clean package'
            }
		}
		
		stage('Performance') {
			steps {
                echo 'Checa performance...'
                bat 'mvn clean verify -Pperformance'
            }
		}
		
		stage('Docker image') {
			steps {
                echo 'Gerando a Docker Image...'
                bat 'docker image build --tag local:demo .'
            }
		}				
		
		stage ('Running image') {		
			steps {
                echo 'Executando a Image...'
                bat 'docker container run -d --name demo -p 18080:18080 local:demo'
            }            
		}
				
		
	}
}
